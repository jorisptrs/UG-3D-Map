const myjson = {
   "type": "geojson",
   "data": {
      "type": "FeatureCollection",
      "features": [
         {
            "type": "Feature",
            "properties": {
               "nb": "1111 \/ 1112",
               "address": "Broerstraat 5\n9712 CP Groningen",
               "faculty": "Academy Building",
               "name": "Academy Building",
               "pic": 1111
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.56283009999999,
                  53.2193266
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1113,
               "address": "Oude Kijk in 't Jatstraat 39\n9712 EC Groningen",
               "faculty": "Communication Department - National Recruitment & Events Team",
               "name": "Central Student Administration",
               "pic": 1113
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5621526,
                  53.2195964
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1114,
               "address": "Oude Kijk in 't Jatstraat 41\/41A",
               "faculty": "Organizational Support & Innovation (OSI)",
               "name": "Alumni Relations and Fundraising",
               "pic": 1114
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5618303,
                  53.2195834
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1117,
               "address": "Muurstraat 14\n9712 GL Groningen",
               "faculty": "Administration Building UG",
               "name": "(temporary) Office of the University",
               "pic": 1117
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5622826,
                  53.2205947
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1121,
               "address": "Oude Boteringestraat 44",
               "faculty": " Administration Building UG",
               "name": "Office of the University",
               "pic": 1121
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5635813,
                  53.2200773
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1124,
               "address": "Oude Boteringestraat 38",
               "faculty": "Faculty of Theology and Religious studies",
               "name": "Faculty of Theology and Religious studies",
               "pic": 1124
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5635979,
                  53.2196871
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1126,
               "address": "Oude Boteringestraat 34",
               "faculty": "Faculty of Arts, HOVO",
               "name": "Faculty of Arts, HOVO",
               "pic": 1126
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5639677,
                  53.2196244
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1131,
               "address": "Oude Boteringestraat 52",
               "faculty": "Faculty of Philosophy",
               "name": "Faculty of Philosophy",
               "pic": 1131
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5634453,
                  53.2203248
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1134,
               "address": "Broerstraat 9",
               "faculty": "Archeology (Arts)",
               "name": "Archeology (Arts)",
               "pic": 1134
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5624324,
                  53.2191584
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1211,
               "address": "Broerstraat 4",
               "faculty": "University of Groningen Library (UB)",
               "name": "University of Groningen Library (UB)",
               "pic": 1211
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5633556,
                  53.2187918
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1212,
               "address": "Poststraat 6",
               "faculty": "Archeology (Arts)",
               "name": "Institute for Archaeology",
               "pic": 1212
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5643585,
                  53.2186714
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": "1213 \/ 1219",
               "address": "O Kijk in t Jatstraat 7a",
               "faculty": "University museum",
               "name": "University museum",
               "pic": 1213
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5629294,
                  53.2184231
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1214,
               "address": "O Kijk in t Jatstraat 5\/7",
               "faculty": "Transboundary Legal Studies ",
               "name": "Transboundary Legal Studies ",
               "pic": 1214
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5629871,
                  53.2183433
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1215,
               "address": "O Kijk in t Jatstraat 9",
               "faculty": "Transboundary Legal Studies ",
               "name": "Faculty of Law, Legal Theory",
               "pic": 1215
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5628194,
                  53.2185044
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1217,
               "address": "Oude Boteringestraat 18",
               "faculty": "Internationaal Privaatrecht (3rd floor)",
               "name": "Internationaal Privaatrecht (3rd floor)",
               "pic": 1217
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5642638,
                  53.2189107
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": "1311 \/ 1312 \/ 1313 \/ 1314 \/ 1315",
               "address": "O Kijk in t Jatstraat 26",
               "faculty": "Arts\/Law\/Language centre",
               "name": "Harmoniecomplex",
               "pic": 1311
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5604998,
                  53.218779
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1321,
               "address": "O Kijk in t Jatstraat 28",
               "faculty": "Editorial office UK (university newspaper)",
               "name": "Editorial office University Newspaper (UK)",
               "pic": 1321
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5617038,
                  53.2192725
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1323,
               "address": "Turftorenstraat 21",
               "faculty": "Faculty of Law and lecture halls",
               "name": "Faculty of Law, Legal History and Legal Methods, and DOS",
               "pic": 1323
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5609232,
                  53.2181662
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 1325,
               "address": "Uurwerkersgang 10",
               "faculty": "student counsellors, psychological counsellors, Study support",
               "name": "Student Support Center",
               "pic": 1325
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5611671,
                  53.2184675
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 2111,
               "address": "Grote Rozenstraat 38",
               "faculty": "Pedagogy, Special Needs Education and Youth Care (GMW)",
               "name": "Nieuwenhuis building",
               "pic": 2111
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5578471,
                  53.2221568999999
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": "2211 \/ 2213",
               "address": "Grote Kruisstraat 2\/1",
               "faculty": "Psychology (GMW)",
               "name": "Heymans building",
               "pic": 2211
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5575627,
                  53.2231502
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 2212,
               "address": "Grote Kruisstraat 2\/1",
               "faculty": "Teacher Education \/ Lecture rooms (GMW)",
               "name": "Munting building",
               "pic": 2212
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5575627,
                  53.2231502
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 2221,
               "address": "Grote Rozenstraat 1",
               "faculty": "Sociology (GMW)",
               "name": "Bouman building",
               "pic": 2221
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5586436,
                  53.2227292
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 2222,
               "address": "Grote Rozenstraat 17",
               "faculty": "Sociology  \/ Lecture rooms (GMW)",
               "name": "Gadourek building",
               "pic": 2222
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5577213,
                  53.2223968
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 2223,
               "address": "Grote Rozenstraat 15",
               "faculty": "Faculty Office (GMW)",
               "name": "Snijders building",
               "pic": 2223
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5582337,
                  53.2225623
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 2224,
               "address": "Grote Rozenstraat 3",
               "faculty": "Educational Sciences \/ GION (GMW)",
               "name": "Van Gelder building",
               "pic": 2224
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5586205,
                  53.2227496
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 2231,
               "address": "N Kijk in t Jatstraat 68\/70",
               "faculty": "Sustainable Society",
               "name": "Jantina Tammes house",
               "pic": 2231
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5609363,
                  53.2204394
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 3111,
               "address": "Antonius Deusinglaan 2",
               "faculty": "Medical Sciences (MRI center and Neuroimaging center)",
               "name": "ADL 2 MRI center and Neuroimaging center",
               "pic": 3111
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5692764,
                  53.2249934
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 3126,
               "address": "Bloemsingel 1",
               "faculty": "Lifelines",
               "name": "Lifelines",
               "pic": 3126
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.56965099999999,
                  53.2241485
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 3211,
               "address": "Antonius Deusinglaan 1",
               "faculty": "MWF complex (UMCG)",
               "name": "MWF complex (UMCG)",
               "pic": 3211
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5709481,
                  53.2232527
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": "4122 \/ 4123",
               "address": "Bloemsingel 36\/36a",
               "faculty": "Faculty of Behavioural and Social Sciences",
               "name": "Lecture rooms Faculty of Behavioural and Social Sciences",
               "pic": 4123
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5642191,
                  53.2263943
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 4321,
               "address": "Pelsterstraat 23",
               "faculty": "Student facilities + KEI",
               "name": "Pelsterpand",
               "pic": 4321
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5663542,
                  53.2165294
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 4335,
               "address": "Aweg 30, 9718 CW Groningen",
               "faculty": "Arctic Centre (Arts)",
               "name": "Education building",
               "pic": 4335
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.55235689999999,
                  53.2151919999999
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 4336,
               "address": "Munnikeholm 10",
               "faculty": "USVA cultural student centre",
               "name": "USVA cultural student centre",
               "pic": 4336
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  53.2154502,
                  6.5622713
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 4345,
               "address": "Hoendiepskade 23\/24",
               "faculty": "University College Groningen",
               "name": "University College Groningen",
               "pic": 4345
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5546035,
                  53.2153549
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 4411,
               "address": "Visserstraat 47\n9712 CT Groningen",
               "faculty": "Health, Safety and Environment Service\/Confidential advisor",
               "name": "Visserstraat 47\/49",
               "pic": 4411
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  53.2194191,
                  6.55943
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 4429,
               "address": "Oude Boteringestraat 23",
               "faculty": "Faculty of Arts",
               "name": "Oude Boteringestraat 23",
               "pic": 4429
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5644661,
                  53.2196390999999
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 4432,
               "address": "Oude Boteringestraat 19",
               "faculty": "Van Swinderen Huys",
               "name": "Van Swinderen Huys",
               "pic": 4432
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5645943,
                  53.2194617
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 4433,
               "address": "Oude Boteringestraat 13",
               "faculty": "Studium Generale",
               "name": "Oude Boteringestraat 13",
               "pic": 4433
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  53.2192725,
                  6.5649829
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": "5111 \/ 5112 \/ 5113 \/ 5114 \/ 5115 \/ 5116 \/ 5117 \/ 5118",
               "address": "Nijenborgh 4",
               "faculty": "Physics, Chemistry, Industrial Engineering and Management (FSE)",
               "name": "Nijenborgh",
               "pic": 5111
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.53823529999999,
                  53.238771
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 5143,
               "address": "Zernikelaan 1",
               "faculty": "Security",
               "name": "Porters lodge",
               "pic": 5143
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5385884,
                  53.2369128
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 5161,
               "address": "Nijenborgh 9",
               "faculty": "Faculty board and general offices (FSE), Mathematics, Computing Science, and Artificial Intelligence",
               "name": "Bernoulliborg",
               "pic": 5161
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5363133,
                  53.2405038
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": "5158 \/5159",
               "address": "Nijenborgh 6",
               "faculty": "Energy Academy Europa",
               "name": "Energy Academy Europa",
               "pic": 5158
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5375575,
                  53.2400764
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": "5171 \/ 5172 \/ 5173 \/ 5174",
               "address": "Nijenborgh 7",
               "faculty": "Biology, Life Sciences and Technology (FSE)",
               "name": "Linnaeusborg",
               "pic": 5172
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5384835,
                  53.241243
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 5231,
               "address": "Nadorstplein 2a",
               "faculty": "Transportation Service",
               "name": "Nadorstplein 2a",
               "pic": 5231
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5328933,
                  53.2365493
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 5236,
               "address": "Blauwborgje 8",
               "faculty": "University Services Department",
               "name": "Blauwborgje 8",
               "pic": 5236
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5346055,
                  53.2371479
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 5256,
               "address": "Blauwborgje 8-10",
               "faculty": "University Services Department",
               "name": "Blauwborgje 8-10",
               "pic": 5256
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5346055,
                  53.2371479
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 5263,
               "address": "Blauwborgje 4",
               "faculty": null,
               "name": "Aletta Jacobs hal (examination hall)",
               "pic": 5263
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5361971,
                  53.2366849
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 5411,
               "address": "Nettelbosje 2",
               "faculty": "Faculty of Economics and Business",
               "name": "Duisenberg building",
               "pic": 5411
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5344117,
                  53.2391078
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 5412,
               "address": "Nettelbosje 2",
               "faculty": "Lecture area",
               "name": "Nettelbosje 2",
               "pic": 5411
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5344117,
                  53.2391078
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 5414,
               "address": "Nettelbosje 2",
               "faculty": "Student societies",
               "name": "Nettelbosje 2",
               "pic": 5411
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5344117,
                  53.2391078
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": "5415 \/ 5416 \/ 5417",
               "address": "Landleven 1",
               "faculty": "Faculty of Spatial Sciences, CI",
               "name": "Landleven 1",
               "pic": 5415
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.53476119999999,
                  53.2377173
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 5419,
               "address": "Landleven 12",
               "faculty": "Astronomy\/Kapteyn Institute, SRON",
               "name": "Kapteynborg",
               "pic": 5419
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5343041,
                  53.240495
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 5431,
               "address": "Nettelbosje 1",
               "faculty": "Centre for Information Technology (CIT)",
               "name": "Smitsborg",
               "pic": 5431
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5359048,
                  53.2382226999999
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 5433,
               "address": "Nettelbosje 2",
               "faculty": "Paviljon Duisenberg Building",
               "name": "Paviljon Duisenberg Building",
               "pic": 5411
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5344117,
                  53.2391078
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 5711,
               "address": "Zernikelaan 25",
               "faculty": "KVI",
               "name": "KVI",
               "pic": 5711
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.5257784,
                  53.2494738
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 7112,
               "address": "Heereweg 10 Schiermonnikoog",
               "faculty": "Behavioural biology",
               "name": "De Herdershut",
               "pic": 7112
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.20849349999999,
                  53.4783690999999
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 7117,
               "address": "Allersmaweg 64 Ezinge",
               "faculty": "Allersmaborg\/Alumnihuis",
               "name": "Allersmaborg",
               "pic": 7117
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  6.4527243,
                  53.3191133
               ]
            }
         },
         {
            "type": "Feature",
            "properties": {
               "nb": 7441,
               "address": "Wirdumerdijk 34 Leeuwarden",
               "faculty": "Faculty Fryslân",
               "name": "Faculty Fryslân Building",
               "pic": 7441
            },
            "geometry": {
               "type": "Point",
               "coordinates": [
                  5.79629139999999,
                  53.1988087
               ]
            }
         }
      ]
   }
};


mapboxgl.accessToken = 'pk.eyJ1IjoiZGVydGllciIsImEiOiJja3kxcG00ZXEwOHgxMm9ueTR1emRiZjNtIn0.kPUIiRVbZUg43ivsy8GfHg';

const groningen = [6.56667, 53.21917]

const map = new mapboxgl.Map({
   style: 'mapbox://styles/mapbox/streets-v11',
   center: groningen,
   zoom: 15.5,
   pitch: 45,
   bearing: -17.6,
   container: 'map',
   antialias: true
});

map.on('load', () => {
   // Insert the layer beneath any symbol layer.
   const layers = map.getStyle().layers;
   const labelLayerId = layers.find(
      (layer) => layer.type === 'symbol' && layer.layout['text-field']
   ).id;
   //map.addSource('places', myjson);
   // The 'building' layer in the Mapbox Streets
   // vector tileset contains building height data
   // from OpenStreetMap.
   map.addLayer(
      {
         'id': 'add-3d-buildings',
         'source': 'composite',
         'source-layer': 'building',
         'filter': ['==', 'extrude', 'true'],
         'type': 'fill-extrusion',
         'minzoom': 10,
         'paint': {
            'fill-extrusion-color': ' #e8daef',

            // Use an 'interpolate' expression to
            // add a smooth transition effect to
            // the buildings as the user zooms in.
            'fill-extrusion-height': [
               'interpolate',
               ['linear'],
               ['zoom'],
               15,
               0,
               15.05,
               ['get', 'height']
            ],
            'fill-extrusion-base': [
               'interpolate',
               ['linear'],
               ['zoom'],
               15,
               0,
               15.05,
               ['get', 'min_height']
            ],
            'fill-extrusion-opacity': 0.7
         }
      },
      labelLayerId
   );
   
   map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 1.5 });
   map.addLayer({
      'id': 'sky',
      'type': 'sky',
      'paint': {
         // set up the sky layer to use a color gradient
         'sky-type': 'gradient',
         // the sky will be lightest in the center and get darker moving radially outward
         // this simulates the look of the sun just below the horizon
         'sky-gradient': [
            'interpolate',
            ['linear'],
            ['sky-radial-progress'],
            0.8,
            'rgba(70, 170, 235, 1.0)',
            1,
            'rgba(0,0,0,0.1)'
         ],
         'sky-gradient-center': [0, 0],
         'sky-gradient-radius': 90,
         'sky-opacity': [
            'interpolate',
            ['exponential', 0.2],
            ['zoom'],
            5,
            0,
            22,
            1
         ]
      }
   });
});

function registerControlPosition(map, positionName) {
   if (map._controlPositions[positionName]) {
      return;
   }
   var positionContainer = document.createElement('div');
   positionContainer.className = `mapboxgl-ctrl-${positionName}`;
   map._controlContainer.appendChild(positionContainer);
   map._controlPositions[positionName] = positionContainer;
}
registerControlPosition(map, "center");

var geocoder = new MapboxGeocoder({
   accessToken: mapboxgl.accessToken,
   mapboxgl: mapboxgl
})
window.mobileCheck = function() {
   let check = false;
   (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
   return check;
 };
if (window.mobileCheck()) {
   map.addControl(geocoder, 'top-left');
} else {
   map.addControl(geocoder, 'center');
}

const nameInfo = document.getElementById('name');
const nbInfo = document.getElementById('nb');
const facultyInfo = document.getElementById('faculty');
const addressInfo = document.getElementById('address');


const legend = document.getElementsByClassName('mapboxgl-ctrl-logo');
legend[0].remove();

async function show() {
   var ugbuildings = myjson.data.features;
   for (let i = 0; i < ugbuildings.length; i += 1) {
      const el = document.createElement('div');
      el.id = 'marker';
      el.style.backgroundImage = `url('pics/${ugbuildings[i].properties.pic}.jpg')`;
      const popup = new mapboxgl.Popup({ offset: 25 }).setHTML(`
                <div id="popup" class="popup" style="z-index: 10;">
                <img src="pics/${ugbuildings[i].properties.pic}.jpg">
                </div>`
      );
      const marker = new mapboxgl.Marker(el)
         .setLngLat(ugbuildings[i].geometry.coordinates)
         .setPopup(popup) // sets a popup on this marker
         .addTo(map);

      marker.getElement().addEventListener('click', () => {
         nameInfo.innerHTML = ugbuildings[i].properties.name;
         nbInfo.innerHTML = ugbuildings[i].properties.nb;
         facultyInfo.innerHTML = ugbuildings[i].properties.faculty;
         addressInfo.innerHTML = ugbuildings[i].properties.address;
      });
   }
}

show();


/*
async function fetchCoords(query) {
    try {
        const response = await fetch(
            `https://api.mapbox.com/geocoding/v5/mapbox.places/${query}.json?access_token=${mapboxgl.accessToken}`,{
            method: 'GET'
        });
        const coords = await response.json();
        return coords;
    } catch (error) {
        console.error(error);
    }
}

async function fill() {
    for (i=0; i<ugbuildings.length; i+=1) {
        let res = await fetchCoords(ugbuildings[i].address);
        ugbuildings[i].coords = res.features[0].center;
    }
} */